{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/app/admin/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { supabase } from '@/lib/supabaseClient';\nimport dynamic from 'next/dynamic';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { useRouter } from 'next/navigation';\n\nconst HazardMap = dynamic(() => import('@/components/HazardMap'), {\n    loading: () => <div className=\"p-10 text-center text-gray-500\">地図を読み込み中...</div>,\n    ssr: false\n});\n\n// 自治体データ\nconst CITIES = {\n    kawagoe: {\n        id: '11201', // 川越市\n        name: '川越市',\n        lat: 35.9251,\n        lng: 139.4858,\n        zoom: 13\n    },\n    tokorozawa: {\n        id: '11208', // 所沢市\n        name: '所沢市',\n        lat: 35.7994,\n        lng: 139.4687,\n        zoom: 13\n    }\n};\n\nexport default function AdminPage() {\n    const router = useRouter();\n    const [posts, setPosts] = useState<any[]>([]);\n\n    // 初期値: 未選択（空文字）\n    const [currentCityKey, setCurrentCityKey] = useState<string>('');\n    const [center, setCenter] = useState({ lat: 35.85, lng: 139.5 }); // 埼玉県全体が見えるあたり\n    const [zoom, setZoom] = useState(11);\n\n    // 地図モード（標準 or 白黒）\n    const [mapMode, setMapMode] = useState<'standard' | 'grayscale'>('standard');\n\n    useEffect(() => {\n        const fetchPosts = async () => {\n            const { data, error } = await supabase.from('hazard_posts').select('*').order('created_at', { ascending: false });\n\n            if (error) {\n                console.error('Error fetching posts:', error);\n                toast.error('データの取得に失敗しました');\n            } else {\n                setPosts(data || []);\n            }\n        };\n        fetchPosts();\n    }, []);\n\n    const handleCityChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n        const cityKey = e.target.value;\n        setCurrentCityKey(cityKey);\n\n        if (cityKey === '') {\n            // 選択解除時\n            setCenter({ lat: 35.85, lng: 139.5 });\n            setZoom(11);\n            toast('エリア選択を解除しました');\n            return;\n        }\n\n        // @ts-ignore\n        const city = CITIES[cityKey];\n        if (city) {\n            setCenter({ lat: city.lat, lng: city.lng });\n            setZoom(city.zoom);\n            toast.success(`${city.name}へ移動しました`);\n        }\n    };\n\n    const handleMapChange = (lat: number, lng: number, newZoom: number) => {\n        setCenter({ lat, lng });\n        setZoom(newZoom);\n    };\n\n    return (\n        <main style={{ width: '100%', height: '100vh', display: 'flex', flexDirection: 'column', fontFamily: 'sans-serif' }}>\n            <Toaster position=\"top-right\" />\n\n            <header\n                style={{\n                    padding: '12px 20px',\n                    background: '#2c3e50',\n                    color: '#fff',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}\n            >\n                <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\n                    <h1 style={{ margin: 0, fontSize: '18px', fontWeight: 'bold' }}>管理者ダッシュボード</h1>\n\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                        <select\n                            value={currentCityKey}\n                            onChange={handleCityChange}\n                            style={{\n                                padding: '6px 12px',\n                                borderRadius: '4px',\n                                border: '1px solid #555',\n                                background: '#34495e',\n                                color: 'white',\n                                fontSize: '14px',\n                                cursor: 'pointer'\n                            }}\n                        >\n                            <option value=\"\">エリア未選択</option>\n                            <option value=\"kawagoe\">埼玉県 川越市</option>\n                            <option value=\"tokorozawa\">埼玉県 所沢市</option>\n                        </select>\n                    </div>\n\n                    {/* 地図モード切り替えスイッチ */}\n                    <div style={{ display: 'flex', background: '#34495e', borderRadius: '4px', padding: '2px' }}>\n                        <button\n                            onClick={() => setMapMode('standard')}\n                            style={{\n                                padding: '4px 10px',\n                                border: 'none',\n                                background: mapMode === 'standard' ? '#3498db' : 'transparent',\n                                color: mapMode === 'standard' ? 'white' : '#bdc3c7',\n                                borderRadius: '3px',\n                                cursor: 'pointer',\n                                fontSize: '12px'\n                            }}\n                        >\n                            カラー\n                        </button>\n                        <button\n                            onClick={() => setMapMode('grayscale')}\n                            style={{\n                                padding: '4px 10px',\n                                border: 'none',\n                                background: mapMode === 'grayscale' ? '#3498db' : 'transparent',\n                                color: mapMode === 'grayscale' ? 'white' : '#bdc3c7',\n                                borderRadius: '3px',\n                                cursor: 'pointer',\n                                fontSize: '12px'\n                            }}\n                        >\n                            白黒\n                        </button>\n                    </div>\n                </div>\n\n                <button\n                    onClick={() => router.push('/')}\n                    style={{\n                        padding: '6px 12px',\n                        background: 'transparent',\n                        border: '1px solid #7f8c8d',\n                        color: '#ecf0f1',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                        fontSize: '13px'\n                    }}\n                >\n                    マップに戻る\n                </button>\n            </header>\n\n            <div style={{ flex: 1, position: 'relative' }}>\n                <HazardMap\n                    posts={posts}\n                    centerPos={center}\n                    zoomLevel={zoom}\n                    onMapChange={handleMapChange}\n                    // @ts-ignore\n                    selectedCityId={currentCityKey ? CITIES[currentCityKey].id : null}\n                    mapMode={mapMode} // モードを渡す\n                />\n\n                <div\n                    style={{\n                        position: 'absolute',\n                        top: '20px',\n                        right: '20px',\n                        background: 'rgba(255, 255, 255, 0.95)',\n                        padding: '15px',\n                        borderRadius: '8px',\n                        boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\n                        zIndex: 1000,\n                        maxWidth: '300px',\n                        fontSize: '13px',\n                        lineHeight: '1.6'\n                    }}\n                >\n                    <h3 style={{ margin: '0 0 10px 0', fontSize: '14px', borderBottom: '1px solid #eee', paddingBottom: '5px', color: '#333' }}>\n                        ビュー設定\n                    </h3>\n                    <p style={{ margin: 0, color: '#555' }}>\n                        地図が見づらい場合は、上部のボタンで\n                        <br />\n                        <b>「白黒」</b>モードに切り替えてください。\n                        <br />\n                        <span style={{ color: '#1E90FF', fontWeight: 'bold' }}>青色のエリア枠</span>が強調表示されます。\n                    </p>\n                </div>\n            </div>\n        </main>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}