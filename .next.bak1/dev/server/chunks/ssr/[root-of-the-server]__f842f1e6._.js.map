{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/constants/cities.ts"],"sourcesContent":["// src/constants/cities.ts\n// 自治体データ定義\n// IDは総務省の全国地方公共団体コードを使用\n// GeoJSONの取得や、投稿時の自動判定に使用します\n\nexport type CityData = {\n    id: string; // 自治体コード (例: 11201)\n    name: string; // 表示名 (例: 川越市)\n    slug: string; // URL用スラッグ (新規追加)\n    lat: number; // 中心緯度\n    lng: number; // 中心経度\n    zoom: number; // 地図ズームレベル\n};\n\nexport const CITIES: Record<string, CityData> = {\n    kawagoe: {\n        id: '11201',\n        name: '川越市',\n        slug: 'kawagoe',\n        lat: 35.9251,\n        lng: 139.4858,\n        zoom: 13\n    },\n    tokorozawa: {\n        id: '11208',\n        name: '所沢市',\n        slug: 'tokorozawa',\n        lat: 35.7994,\n        lng: 139.4687,\n        zoom: 13\n    },\n    sayama: {\n        id: '11215',\n        name: '狭山市',\n        slug: 'sayama',\n        lat: 35.8533,\n        lng: 139.4122,\n        zoom: 13\n    },\n    fujimino: {\n        id: '11245',\n        name: 'ふじみ野市',\n        slug: 'fujimino',\n        lat: 35.8794,\n        lng: 139.5197,\n        zoom: 13\n    }\n};\n\n// 住所文字列からcity_codeを判定するためのマッピング\n// APIから返ってくる \"川越市\" などの文字列をキーにする\nexport const CITY_NAME_TO_CODE: Record<string, string> = {\n    川越市: '11201',\n    所沢市: '11208',\n    狭山市: '11215',\n    ふじみ野市: '11245'\n};\n"],"names":[],"mappings":"AAAA,0BAA0B;AAC1B,WAAW;AACX,wBAAwB;AACxB,6BAA6B;;;;;;;AAWtB,MAAM,SAAmC;IAC5C,SAAS;QACL,IAAI;QACJ,MAAM;QACN,MAAM;QACN,KAAK;QACL,KAAK;QACL,MAAM;IACV;IACA,YAAY;QACR,IAAI;QACJ,MAAM;QACN,MAAM;QACN,KAAK;QACL,KAAK;QACL,MAAM;IACV;IACA,QAAQ;QACJ,IAAI;QACJ,MAAM;QACN,MAAM;QACN,KAAK;QACL,KAAK;QACL,MAAM;IACV;IACA,UAAU;QACN,IAAI;QACJ,MAAM;QACN,MAAM;QACN,KAAK;QACL,KAAK;QACL,MAAM;IACV;AACJ;AAIO,MAAM,oBAA4C;IACrD,KAAK;IACL,KAAK;IACL,KAAK;IACL,OAAO;AACX"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/components/ClientMapPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ClientMapPage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ClientMapPage.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA","ignoreList":[0]}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/components/ClientMapPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ClientMapPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ClientMapPage.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAgR,GAC7S,8CACA","ignoreList":[0]}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/yabea/Desktop/work/next/hazard-map/src/app/%5BcitySlug%5D/page.tsx"],"sourcesContent":["import { CITIES } from '@/constants/cities';\nimport { supabase } from '@/lib/supabaseClient';\nimport ClientMapPage from '@/components/ClientMapPage';\nimport { Metadata } from 'next';\nimport { notFound } from 'next/navigation';\n\n// Static Export (output: 'export') 対応のためにパスを生成\nexport async function generateStaticParams() {\n    return Object.values(CITIES).map((city) => ({\n        citySlug: city.slug\n    }));\n}\n\n// 最新の投稿を取得する関数\nasync function getCityRecentPosts(cityCode: string) {\n    // サーバーサイドで実行されるため、安全にデータを取得してHTMLに埋め込めます\n    const { data } = await supabase\n        .from('hazard_posts')\n        .select('id, reason, address, created_at')\n        .eq('city_code', cityCode)\n        .order('created_at', { ascending: false })\n        .limit(10); // 最新10件を取得\n\n    return data || [];\n}\n\ntype Props = {\n    params: Promise<{ citySlug: string }>;\n};\n\n// メタデータの動的生成\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n    const { citySlug } = await params;\n\n    // スラッグから都市データを検索\n    const cityData = Object.values(CITIES).find((c) => c.slug === citySlug);\n\n    if (!cityData) {\n        return {\n            title: 'ページが見つかりません - みんなのマチレポ'\n        };\n    }\n\n    return {\n        title: `${cityData.name}のみんなのマチレポ - 地域の安全・安心マップ`,\n        description: `${cityData.name}（埼玉県）の危険箇所や気づきを地図で共有。暗い道、見通しの悪い交差点などをみんなで投稿して安全な街づくりに役立てましょう。`,\n        openGraph: {\n            title: `${cityData.name}のみんなのマチレポ`,\n            description: `${cityData.name}の防犯・安全情報を地図でチェック`\n        }\n    };\n}\n\nexport default async function CityPage({ params }: Props) {\n    const { citySlug } = await params;\n\n    // スラッグから都市データを検索\n    const cityData = Object.values(CITIES).find((c) => c.slug === citySlug);\n\n    if (!cityData) {\n        notFound();\n    }\n\n    // サーバー側でデータ取得 (SEOに効くHTMLが出力されます)\n    const recentPosts = await getCityRecentPosts(cityData.id);\n\n    return <ClientMapPage cityData={cityData} recentPosts={recentPosts} />;\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AAEA;AAAA;;;;;;AAGO,eAAe;IAClB,OAAO,OAAO,MAAM,CAAC,oIAAM,EAAE,GAAG,CAAC,CAAC,OAAS,CAAC;YACxC,UAAU,KAAK,IAAI;QACvB,CAAC;AACL;AAEA,eAAe;AACf,eAAe,mBAAmB,QAAgB;IAC9C,yCAAyC;IACzC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wIAAQ,CAC1B,IAAI,CAAC,gBACL,MAAM,CAAC,mCACP,EAAE,CAAC,aAAa,UAChB,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM,GACvC,KAAK,CAAC,KAAK,WAAW;IAE3B,OAAO,QAAQ,EAAE;AACrB;AAOO,eAAe,iBAAiB,EAAE,MAAM,EAAS;IACpD,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;IAE3B,iBAAiB;IACjB,MAAM,WAAW,OAAO,MAAM,CAAC,oIAAM,EAAE,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAE9D,IAAI,CAAC,UAAU;QACX,OAAO;YACH,OAAO;QACX;IACJ;IAEA,OAAO;QACH,OAAO,GAAG,SAAS,IAAI,CAAC,uBAAuB,CAAC;QAChD,aAAa,GAAG,SAAS,IAAI,CAAC,6DAA6D,CAAC;QAC5F,WAAW;YACP,OAAO,GAAG,SAAS,IAAI,CAAC,SAAS,CAAC;YAClC,aAAa,GAAG,SAAS,IAAI,CAAC,gBAAgB,CAAC;QACnD;IACJ;AACJ;AAEe,eAAe,SAAS,EAAE,MAAM,EAAS;IACpD,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;IAE3B,iBAAiB;IACjB,MAAM,WAAW,OAAO,MAAM,CAAC,oIAAM,EAAE,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAE9D,IAAI,CAAC,UAAU;QACX,IAAA,iMAAQ;IACZ;IAEA,kCAAkC;IAClC,MAAM,cAAc,MAAM,mBAAmB,SAAS,EAAE;IAExD,qBAAO,8OAAC,8IAAa;QAAC,UAAU;QAAU,aAAa;;;;;;AAC3D"}}]
}